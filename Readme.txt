Taken from http://qt.developpez.com/tutoriels/braindeadbzh/customwindow/